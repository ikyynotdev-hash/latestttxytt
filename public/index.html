<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TikTok Downloader</title>
  <style>
    body{font-family:sans-serif;margin:32px}
    input{width:60%;padding:8px;margin-right:8px}
    button{padding:8px}
    .info{margin-top:16px;color:#444}
  </style>
</head>
<body>
  <h1>TikTok Downloader (Vercel Version)</h1>
  <input id="url" placeholder="URL TikTok" />
  <button id="go">Download</button>
  <div id="info" class="info"></div>

  <script>
    document.getElementById('go').onclick = async () => {
      const url = document.getElementById('url').value.trim();
      const info = document.getElementById('info');
      info.textContent = 'Mencari...';

      try {
        const r = await fetch('/api?url=' + encodeURIComponent(url));
        if (!r.ok) throw new Error('Gagal extract');
        const j = await r.json();

        if (!j.videoUrl) throw new Error('Video tidak ditemukan');

        const a = document.createElement('a');
        a.href = '/api?url=' + encodeURIComponent(url) + '&download=1';
        a.textContent = 'Download Video';
        a.style.display = 'block';

        info.innerHTML = '';
        info.appendChild(a);

      } catch (err) {
        info.textContent = 'Error: ' + err.message;
      }
    };
  </script>
</body>
</html>
